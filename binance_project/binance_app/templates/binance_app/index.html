
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>API Binance</title>
    </head>
    <body>

        <!-- ISSO AQUI É PYTHON / DJANGO -->
        <h2>PYTHON</h2>
        <h3>Valor de abertura do Bitcoin: {{ inicial }}</h3>
        <h3>Valor atualizado do Bitcoin: {{ atualizado }}</h3>
        <h3>Variação de : {{ variacao }} %</h3>
        <h3>{{ mensagem }}</h3>

        <!-- ISSO AQUI É HTML E JAVASCRIPT -->

        <h2>HTML E JAVASCRIPT</h2>
        <h3>Valor Inicial do Bitcoin: <span id="valor-inicial"></span></h3>
        <h3>Valor Atualizado Bitcoin: <span id="valor-api"></span></h3>

        <script>
            function valorInicial() {
                fetch('/inicial/')
                    .then(response => response.json())
                    .then(data => {
                        let valor_formatado = data.price;
                        let valor_decimal = parseFloat(valor_formatado)
                        document.getElementById('valor-inicial').textContent = valor_decimal.toFixed(2);
                    })
                    .catch(error => console.error('Erro ao obter dados da API:', error))
            }
            valorInicial()
            function valorAtualizado() {
                fetch('/atualizado/')
                    .then(response => response.json())
                    .then(data => {
                        let valor_formatado = data.price;
                        let valor_decimal = parseFloat(valor_formatado)
                        document.getElementById('valor-api').textContent = valor_decimal.toFixed(2);
                    })
                    .catch(error => console.error('Erro ao obter dados da API:', error))
                    .finally(() => {
                        setTimeout(valorAtualizado, 3000);
                    });
            }
            valorAtualizado()
        </script>
    </body>
</html>